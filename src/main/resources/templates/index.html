<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="TemplateMo">
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900" rel="stylesheet">

    <title>STOP</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">


    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="assets/css/fontawesome.css">
    <link rel="stylesheet" href="assets/css/templatemo-edu-meeting.css">
    <link rel="stylesheet" href="assets/css/owl.css">
    <link rel="stylesheet" href="assets/css/lightbox.css">
    <!--

    TemplateMo 569 Edu Meeting

    https://templatemo.com/tm-569-edu-meeting

    -->
</head>

<body>

<!-- Sub Header -->
<div class="sub-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-sm-8">
                <div class="left-content">
                    <p>Empresa <em>STOP</em></p>
                </div>
            </div>
            <div class="col-lg-4 col-sm-4">
                <div class="right-icons">
                    <ul>
                        <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                        <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                        <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ***** Header Area Start ***** -->
<header class="header-area header-sticky">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <nav class="main-nav">
                    <!-- ***** Logo Start ***** -->
                    <a href="index.html" class="logo">
                        STOP
                    </a>
                    <!-- ***** Logo End ***** -->
                    <!-- ***** Menu Start ***** -->
                    <ul class="nav">
                        <li class="scroll-to-section"><a href="#services" class="active">Servicios</a></li>
                        <li class="scroll-to-section"><a href="#aboutus" class="active">Nosotros</a></li>
                        <li class="scroll-to-section"><a href="#contact" class="active">Contacto</a></li>
                    </ul>
                    <a class='menu-trigger'>
                        <span>Menu</span>
                    </a>
                    <!-- ***** Menu End ***** -->
                </nav>
            </div>
        </div>
    </div>
</header>
<!-- ***** Header Area End ***** -->

<!-- ***** Main Banner Area Start ***** -->
<section class="section main-banner" id="top" data-section="section1">
    <video autoplay muted loop id="bg-video">
        <source src="assets/images/company-video.mp4" type="video/mp4"/>
    </video>

    <div class="video-overlay header-text">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="caption">
                        <h2>Bienvenidos</h2>
                        <div class="main-button-red">
                            <div class="scroll-to-section"><a href="#contact">¡Contáctenos!</a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- ***** Main Banner Area End ***** -->

<section class="services" id="services">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="owl-service-item owl-carousel">

                    <!-- Bucle Thymeleaf para iterar sobre cada servicio -->
                    <div class="item" th:each="servicio : ${servicios}">
                        <div class="image-container">
                            <img th:src="@{'http://localhost:9000/imagen/obtener/' + ${servicio.imagenId}}" alt="Imagen de servicio">
                        </div>
                        <div class="down-content">
                            <!-- Mostrar el nombre del servicio -->
                            <h4 th:text="${servicio.nombre}">Nombre del Servicio</h4>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</section>



<section class="our-facts" id="aboutus" style="margin-top: 50px;">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="count-area-content percentage">
                            <h2>Algunos datos sobre nosotros</h2>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="row">
                            <div class="col-12">
                                <div class="count-area-content percentage">
                                    <div class="count-digit">70</div>
                                    <div class="count-title">De los barrios de mendoza</div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="count-area-content">
                                    <div class="count-digit">+600</div>
                                    <div class="count-title">Empleados</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="row">
                            <div class="col-12">
                                <div class="count-area-content new-students">
                                    <div class="count-digit" id="countServicios">7</div>
                                    <div class="count-title">Servicios</div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="count-area-content">
                                    <div class="count-digit">10</div>
                                    <div class="count-title">Años de experiencia</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 align-self-center">
                <div class="video" style="margin-top: 20px; border: none; box-shadow: none;">
                    <video width="100%" autoplay loop muted>
                        <source src="assets/images/security-video.mp4" type="video/mp4">
                        Tu navegador no soporta la reproducción de video.
                    </video>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="contact-us" id="contact">
    <div class="container">
        <div class="row">
            <div class="col-lg-9 align-self-center">
                <div class="row">
                    <div class="col-lg-12">
                        <form id="contact" action="submit" method="post">
                            <div class="row">
                                <div class="col-lg-12">
                                    <h2>¡Hablemos por Whatsapp!</h2>
                                </div>
                                <div class="col-lg-4">
                                    <fieldset>
                                        <input name="name" type="text" id="name" placeholder="NOMBRE...*" required="">
                                    </fieldset>
                                </div>
                                <div class="col-lg-4">
                                    <fieldset>
                                        <input name="surname" type="text" id="name" placeholder="APELLIDO...*"
                                               required="">
                                    </fieldset>
                                </div>
                                <div class="col-lg-4">
                                    <fieldset>
                                        <input name="subject" type="text" id="subject" placeholder="ASUNTO...*"
                                               required="">
                                    </fieldset>
                                </div>
                                <div class="col-lg-12">
                                    <fieldset>
                                        <textarea name="message" type="text" class="form-control" id="message"
                                                  placeholder="MENSAJE..." required=""></textarea>
                                    </fieldset>
                                </div>
                                <div class="col-lg-12">
                                    <fieldset>
                                        <button type="submit" id="form-submit" class="button">ENVIAR AHORA</button>
                                    </fieldset>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="right-info">
                    <ul>
                        <li>
                            <h6>Teléfono</h6>
                            <span>0261123123</span>
                        </li>
                        <li>
                            <h6>Email</h6>
                            <span>contacto@stop.com</span>
                        </li>
                        <li>
                            <h6>Dirección</h6>
                            <span> Ingenieros J. 1400, Mendoza, 5500, Argentina</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Scripts -->
<!-- Bootstrap core JavaScript -->
<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<script src="assets/js/isotope.min.js"></script>
<script src="assets/js/owl-carousel.js"></script>
<script src="assets/js/lightbox.js"></script>
<script src="assets/js/tabs.js"></script>
<script src="assets/js/video.js"></script>
<script src="assets/js/slick-slider.js"></script>
<script src="assets/js/custom.js"></script>
<script>
    //according to loftblog tut
    $('.nav li:first').addClass('active');

    var showSection = function showSection(section, isAnimate) {
      var
      direction = section.replace(/#/, ''),
      reqSection = $('.section').filter('[data-section="' + direction + '"]'),
      reqSectionPos = reqSection.offset().top - 0;

      if (isAnimate) {
        $('body, html').animate({
          scrollTop: reqSectionPos },
        800);
      } else {
        $('body, html').scrollTop(reqSectionPos);
      }

    };

    var checkSection = function checkSection() {
      $('.section').each(function () {
        var
        $this = $(this),
        topEdge = $this.offset().top - 80,
        bottomEdge = topEdge + $this.height(),
        wScroll = $(window).scrollTop();
        if (topEdge < wScroll && bottomEdge > wScroll) {
          var
          currentId = $this.data('section'),
          reqLink = $('a').filter('[href*=\\#' + currentId + ']');
          reqLink.closest('li').addClass('active').
          siblings().removeClass('active');
        }
      });
    };

    $('.main-menu, .responsive-menu, .scroll-to-section').on('click', 'a', function (e) {
      e.preventDefault();
      showSection($(this).attr('href'), true);
    });

    $(window).scroll(function () {
      checkSection();
    });

  document.getElementById('contact').addEventListener('submit', function(event) {
    event.preventDefault(); // Evita el envío del formulario por defecto

    // Captura los valores del formulario
    const name = document.getElementById('name').value;
    const surname = document.getElementsByName('surname')[0].value;
    const subject = document.getElementById('subject').value.toUpperCase(); // Convierte el asunto a mayúsculas
    const message = document.getElementById('message').value;

    // Formatea el mensaje de WhatsApp con el formato solicitado
    const whatsappMessage = `${subject}\n\n¡Hola! Soy ${surname}, ${name}\n\n${message}`;

    // Número de WhatsApp de destino (cambia este número por el que deseas)
    const phoneNumber = '5492604235948';

    // Construye la URL de WhatsApp con el mensaje
    const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(whatsappMessage)}`;

    // Abre la URL en una nueva pestaña
    window.open(whatsappUrl, '_blank');

    async function actualizarContadorServicios() {
        try {
            const response = await fetch('http://localhost:8080/servicio/obtener');
            if (response.ok) {
                const servicios = await response.json();
                console.log('Servicios recibidos:', servicios); // Verifica el formato de los datos
                console.log('Cantidad de servicios:', servicios.length); // Verifica la cantidad
                // Actualiza el número de servicios en el HTML
                document.getElementById('countServicios').innerText = servicios.length || 0;
            } else {
                console.error('Error al obtener los servicios, estado:', response.status);
            }
        } catch (error) {
            console.error('Error en la solicitud:', error);
        }
    }

    // Llama a la función cuando la página cargue
    window.onload = actualizarContadorServicios;

});

</script>
</body>

</body>
</html>